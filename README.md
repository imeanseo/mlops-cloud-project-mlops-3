<!-- Header -->
<div align="center">
  
![header](https://capsule-render.vercel.app/api?type=rounded&height=180&text=Group3%20Thirdparty%20Game%20Recommendation&desc=MLOps%20Project%20🎮&fontSize=35&descSize=20&descAlignY=65&color=gradient&customColorList=0,2,6,11,20&fontColor=ffffff&animation=fadeIn)

<h3>🚀 Item-based Collaborative Filtering으로 구현한 게임 추천 시스템 🚀</h3>

[![GitHub stars](https://img.shields.io/github/stars/AIBootcamp16/mlops-cloud-project-mlops-3?style=social)](https://github.com/AIBootcamp16/mlops-cloud-project-mlops-3)
[![GitHub forks](https://img.shields.io/github/forks/AIBootcamp16/mlops-cloud-project-mlops-3?style=social)](https://github.com/AIBootcamp16/mlops-cloud-project-mlops-3)

</div>

<br><br>

## 💻 프로젝트 소개

### 프로젝트 개요
MLOps 파이프라인을 활용한 **게임 추천 시스템** 구축 프로젝트입니다. 

Item-based Collaborative Filtering 알고리즘을 기반으로 사용자 맞춤형 게임을 추천하며, 개별 게임의 속성과 사용자의 성향을 분석하여 유사도가 높은 게임을 추천함으로써 맞춤형 결과를 제공하는 것을 목표로 설정했습니다.

### 작품 특징
- 🤖 **자동화된 ML 파이프라인**: Airflow를 통한 데이터 수집부터 모델 학습, 배포까지 전 과정 자동화
- ⚡ **실시간 추천 API**: FastAPI 기반의 고성능 추천 서비스 제공
- 🐳 **컨테이너 기반 배포**: Docker를 활용한 환경 독립적인 배포 및 운영
- 📊 **실험 관리**: WANDB, S3를 통한 체계적인 모델 실험 추적 및 관리
- 🎯 **개인화 추천**: 단순 인기·장르 추천의 한계를 넘어, 게임 속성 + 사용자 행동 데이터로 세부 취향 프로파일을 생성하여 맞춤 추천 제공

<br>

## 👨‍👩‍👦‍👦 팀 구성원

<div align="center">

<table>
<tr>
<td align="center" width="200px">
<a href="https://github.com/USERNAME"><img src="https://avatars.githubusercontent.com/u/89570502?v=4" width="150px;" alt="권문진"/></a>
</td>
<td align="center" width="200px">
<a href="https://github.com/imeanseo"><img src="https://avatars.githubusercontent.com/u/221927853?v=4" width="150px;" alt="고민서"/></a>
</td>
<td align="center" width="200px">
<a href="https://github.com/USERNAME"><img src="https://avatars.githubusercontent.com/u/219617394?v=4" width="150px;" alt="허예경"/></a>
</td>
</tr>
<tr>
<td align="center">
<a href="https://github.com/moongs95"><b>👑 권문진 (팀장)</b></a>
</td>
<td align="center">
<a href="https://github.com/imeanseo"><b>😺 고민서 </b></a>
</td>
<td align="center">
<a href="https://github.com/yekyung821"><b>🐥 허예경</b></a>
</td>
</tr>
<tr>
<td align="center">
<sub><b>📌 담당 역할</b></sub><br>
<sub>✅ 주제 선정</sub><br>
<sub>✅ 게임 이미지 데이터 수집</sub><br>
<sub>✅ 모델 학습 및 평가</sub><br>
<sub>✅ 모델 추론</sub><br>
<sub>✅ 모델 배포</sub><br>
<sub>✅ 정적 웹사이트 배포</sub><br>
<sub>✅ PPT 자료 구성</sub>
</td>
<td align="center">
<sub><b>📌 담당 역할</b></sub><br>
<sub>✅ 주제 선정</sub><br>
<sub>✅ 게임 이미지 데이터 수집</sub><br>
<sub>✅ 모델 학습 및 평가</sub><br>
<sub>✅ 모델 추론</sub><br>
<sub>✅ 모델 배포</sub><br>
<sub>✅ PPT 자료 구성</sub><br>
<sub>✅ ReadMe 구성</sub>
</td>
<td align="center">
<sub><b>📌 담당 역할</b></sub><br>
<sub>✅ 주제 선정</sub><br>
<sub>✅ 데이터 전처리</sub><br>
<sub>✅ Modeling</sub><br>
<sub>✅ 모델 배포</sub><br>
<sub>✅ UI 변경</sub><br>
<sub>✅ PPT 자료 구성</sub>
</td>
</tr>
<tr>
<td align="center" width="200px">
<a href="https://github.com/CodMPer"><img src="https://avatars.githubusercontent.com/u/221468673?v=4" width="150px;" alt="김동근"/></a>
</td>
<td align="center" width="200px">
<a href="https://github.com/Leesoomin97"><img src="https://avatars.githubusercontent.com/u/218931464?v=4" width="150px;" alt="이수민"/></a>
</td>
<td align="center" width="200px">
<a href="https://github.com/tourism76"><img src="https://avatars.githubusercontent.com/u/228438426?v=4" width="150px;" alt="이승호"/></a>
</td>
</tr>
<tr>
<td align="center">
<a href="https://github.com/USERNAME"><b>👨🏻‍💻 김동근</b></a>
</td>
<td align="center">
<a href="https://github.com/USERNAME"><b>🐿️ 이수민</b></a>
</td>
<td align="center">
<a href="https://github.com/USERNAME"><b>🧑🏻‍🦱 이승호</b></a>
</td>
</tr>
<tr>
<td align="center">
<sub><b>📌 담당 역할</b></sub><br>
<sub>✅ 주제 선정</sub><br>
<sub>✅ 게임 이미지 데이터 수집</sub><br>
</td>
<td align="center">
<sub><b>📌 담당 역할</b></sub><br>
<sub>✅ 주제 선정</sub><br>
<sub>✅ 데이터 전처리</sub><br>
<sub>✅ Modeling</sub><br>
<sub>✅ 모델 배포</sub><br>
<sub>✅ UI 변경</sub><br>
<sub>✅ PPT 자료 구성</sub>
</td>
<td align="center">
<sub><b>📌 담당 역할</b></sub><br>
<sub>✅ 주제 선정</sub><br>
<sub>✅ 게임 이미지 데이터 수집</sub><br>
</td>
</tr>
</table>

</div>

<br>


## 🔨 개발 환경 및 기술 스택
### 💻 Languages & Frameworks
![Python](https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white)
![FastAPI](https://img.shields.io/badge/FastAPI-009688?style=for-the-badge&logo=fastapi&logoColor=white)

### 🛠️ MLOps & Data Engineering
![Apache Airflow](https://img.shields.io/badge/Apache%20Airflow-017CEE?style=for-the-badge&logo=apacheairflow&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white)

### ☁️ Cloud & Tools
![AWS S3](https://img.shields.io/badge/AWS%20S3-569A31?style=for-the-badge&logo=amazons3&logoColor=white)
![Weights & Biases](https://img.shields.io/badge/Weights_&_Biases-FFBE00?style=for-the-badge&logo=weightsandbiases&logoColor=black)

### 🤝 Collaboration
![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)
![Notion](https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white)
![Discord](https://img.shields.io/badge/Discord-5865F2?style=for-the-badge&logo=discord&logoColor=white)
![Google Drive](https://img.shields.io/badge/Google%20Drive-4285F4?style=for-the-badge&logo=googledrive&logoColor=white)

<br>

## 📁 프로젝트 구조
```
.
├── data-prepare
│   ├── crawler.py
│   ├── main.py
│   ├── preprocessing.py
│   └── result
│       ├── games_log.csv
│       └── popular_games.csv
├── mlops
│   ├── dataset
│   │   ├── games_log.csv
│   │   └── inference_results
│   │       ├── recommendations_20251001_194849.csv
│   │       ├── recommendations_20251004_202024.csv
│   │       └── recommendations_20251008_102139.csv
│   ├── models
│   │   └── itemCF
│   │       ├── itemCF_E10_T20251004_201952.pkl
│   │       ├── itemCF_E10_T20251008_102040.pkl
│   │       └── itemCF_E10_T20251008_102101.pkl
│   └── src
│       ├── dataset
│       │   ├── data_loader.py
│       │   └── games_log.py
│       ├── evaluate
│       │   └── evaluates.py
│       ├── inference
│       │   └── inference.py
│       ├── main.py
│       ├── model
│       │   └── game_item_cf.py
│       ├── save_to_db.py
│       ├── static
│       │   ....
│       │   ├── 9753.jpg
│       │   ├── 9800.jpg
│       │   └── 994787.jpg
│       ├── templates
│       │   └── index.html
│       ├── train
│       │   └── train.py
│       ├── utils
│       │   ├── enums.py
│       │   └── utils.py
│       └── webapp.py
└── requirements.txt
```

<br>

## 💻 구현 기능

### 1. 데이터 수집 및 전처리 자동화
- **RAWG Games API** 연동을 통한 무료 액션 게임 메타데이터 자동 수집
- `crawler.py`를 활용한 API 호출 자동화 (`/api/games`, `tags=free-to-play`, `genres=action`, `ordering=-rating`)
- **수집 변수**: game_id, game_name, playtime, rating, genre, owned, add
- **데이터셋 구성**: 약 40개 게임, 가상 유저 100명, ~300개 상호작용 로그 생성
- **전처리 파이프라인**: 
  - 텍스트 정제 (공백·특수문자 제거)
  - 결측치 처리 (rating, playtime 평균/중앙값 보완)
  - 파생변수 생성 (`owned_ratio = owned / added`)
  - Min-Max Scaling을 통한 데이터 정규화
- **가상 유저 로그**: `weight = rating × owned_ratio`, α-blend + noise로 확률적 샘플링 (1~5개 비복원)

### 2. Item-based Collaborative Filtering 추천 모델
- **모델 선정 배경**: 
  - User 정보 부재로 User-CF 부적합
  - 게임 속성/공동플레이 정보 중심 데이터 구조
  - 희소 데이터에서도 안정적인 구현
- **유사도 계산**: 공동 선택(co-occurrence) 기반 아이템-아이템 유사도 (코사인/자카드)
- **스코어링 공식**: `score(i|u) = Σ_{j∈S_u} sim(i, j)`
- **훈련 과정**:
  - Epoch = 10 반복 학습을 통한 최적화
  - 훈련/검증 데이터 분리
  - Airflow 기반 자동화된 훈련 파이프라인
- **평가 지표**: Recall@K (재현율), Precision@K, HitRate@K, MAP@K, NDCG@K
- **실험 관리**: WandB로 Epoch별 Recall 변화 추적, 과적합 방지 및 안정적 수렴 확인

### 3. 실시간 & 배치 서빙 이중화 시스템
**FastAPI 실시간 서빙**:
- 컨테이너 부팅 시 사전학습 모델(`*.pkl`) 메모리 적재 및 워밍업
- RESTful API 엔드포인트 제공 (`POST /predict`)
- Pydantic 기반 입력 검증, JSON 응답 (예측 결과 + 신뢰도/스코어)
- ms 단위 지연시간으로 유저 ID → Top-K 추천 목록 반환
- `/healthz` 헬스체크로 가용성 모니터링

**Airflow 배치 서빙**:
- 주기적 모델 재학습 및 리프레시 자동화
- 일정 주기로 입력 데이터 일괄 처리 후 MySQL/S3에 결과 저장
- DAG 기반 워크플로우 관리로 재활용 가능한 배치 예측

### 4. 완전 자동화된 MLOps 파이프라인
- **GitHub Actions CI/CD**: 
  - 코드 푸시 → Unit Test → Docker 이미지 빌드 → DockerHub Push
  - Airflow DAG 자동 트리거 → EC2 내 FastAPI 서비스 배포
- **모델 버전 관리**: 
  - S3에 모델 업로드 및 버전 태깅 (model_v1, model_v2...)
  - WandB 로그로 성능 지표, 파라미터 기록
  - requirements.txt로 환경 버전 고정
  - 성능 저하 시 이전 버전 롤백 가능
- **웹 인터페이스**: `webapp.py`를 통한 사용자 친화적 추천 결과 시각화

<br>

## 🛠️ 시스템 아키텍처
```
┌─────────────────────────────────────────────────────────────────┐
│ GitHub Actions (CI/CD) │
│ Code Push → Unit Test → Docker Build → DockerHub Push │
└────────────────────────┬────────────────────────────────────────┘
│
▼
┌──────────────┐ ┌────────────────┐ ┌─────────────────┐
│ RAWG API │───▶│ Data Pipeline │───▶│ MySQL Database │
│ (Raw Games) │ │ crawler.py │ │ games_log.csv │
└──────────────┘ │ main.py │ └────────┬────────┘
│ preprocessing │ │
└────────────────┘ │
│
┌─────────────────────────┤
│ │
▼ ▼
┌────────────────────┐ ┌───────────────────┐
│ Model Training │ │ Airflow Pipeline │
│ ItemCF (Epoch=10) │ │ (Batch Serving) │
│ WandB Monitoring │ │ - Model Update │
└─────────┬──────────┘ │ - Batch Predict │
│ │ - DB Storage │
▼ └─────────┬─────────┘
┌────────────────────┐ │
│ Model Storage │ │
│ S3 + Versioning │──────────────┤
│ (model_v1, v2..., v7) │ │
└─────────┬──────────┘ │
│ │
▼ ▼
┌────────────────────┐ ┌──────────────────┐
│ FastAPI Server │◀───│ MySQL Results │
│ (Real-time) │ │ (Pre-computed) │
│ - Model Loading │ └──────────────────┘
│ - RESTful API │
│ - Health Check │
└─────────┬──────────┘
│
▼
┌────────────────────┐
│ Web Interface │
│ webapp.py │
│ User-friendly UI │
└────────────────────┘
```

**핵심 아키텍처 특징**:
- **완전 자동화**: 데이터 수집 → 전처리 → 학습 → DB 적재 → 웹 배포 전 과정 자동화
- **이중 서빙 시스템**: 실시간(FastAPI) + 배치(Airflow) 병행 운영
- **지속적 통합/배포**: GitHub Actions 기반 CI/CD로 효율적 운영
- **재현성 보장**: Docker 컨테이너화 + 버전 관리로 환경 일관성 확보

<br>

<div align="center">
  <img width="800" alt="MLOps Architecture" src="https://github.com/user-attachments/assets/f2aa6af3-5ed4-4cdc-8650-234a23948175" />
  <p><i>게임 추천 시스템 MLOps 파이프라인 전체 구조</i></p>
</div>

---

## 📊 주요 구성 요소

### 1️⃣ GitHub Actions CI/CD 파이프라인 🚀

**워크플로우**: Code Push → Unit Test → Docker Build → DockerHub Push

**주요 기능**:
- ✅ **지속적 통합/배포(CI/CD) 자동화**
- ✅ 코드 푸시 시 자동 테스트 실행
- ✅ 테스트 통과 시 Docker 이미지 자동 빌드
- ✅ DockerHub에 자동 업로드하여 배포 준비 완료

---

### 2️⃣ 데이터 파이프라인 📥

#### A. RAWG API (Data Source)
- 무료 게임 정보 API에서 데이터 수집
- 약 40개의 게임 메타데이터 확보
- API 엔드포인트: `/api/games`, `tags=free-to-play`, `genres=action`

#### B. Data Processing Pipeline
| 컴포넌트 | 역할 |
|---------|------|
| `crawler.py` | API 호출 자동화 |
| `main.py` | 데이터 처리 로직 실행 |
| `preprocessing` | 전처리 (텍스트 정제, 결측치 처리, 파생변수 생성) |

#### C. MySQL Database
- 전처리된 데이터를 `games_log.csv` 형태로 저장
- 학습 데이터와 유저 로그 통합 관리

---

### 3️⃣ 모델 학습 및 관리 파이프라인 🧠

#### A. Model Training
- **알고리즘**: Item-based Collaborative Filtering (ItemCF)
- **학습 설정**: Epoch = 10 (10회 반복 학습)
- **최적화**: 반복 학습을 통한 모델 성능 향상

#### B. WandB Monitoring
- **Weights & Biases**를 통한 실험 추적
- Epoch별 Recall 변화 실시간 시각화
- 과적합 방지 및 성능 모니터링 체계 구축

#### C. Model Storage (S3 + Versioning)
- **AWS S3**에 학습 완료 모델 저장
- 버전 태깅: `model_v1`, `model_v2`, `model_v3`...
- 성능 저하 시 이전 버전으로 롤백 가능

---

### 4️⃣ Airflow 배치 서빙 파이프라인 ⏰

#### 배치 처리 워크플로우
```
1. S3에서 최신 모델 로드
↓

2. MySQL에서 유저 데이터 가져오기
↓

3. 배치로 추천 결과 대량 계산
↓

4. 결과를 MySQL에 저장하여 재활용
```

#### 주요 기능
- 🔄 **주기적 모델 업데이트**: 새로운 데이터로 자동 재학습
- 📦 **배치 예측**: 일정 주기로 대량 데이터 일괄 처리
- 💾 **DB Storage**: 추천 결과를 MySQL에 저장하여 재활용

---

### 5️⃣ 실시간 서빙 시스템 (Deployment) 🌐

#### A. Docker Container
- FastAPI 서버를 Docker로 컨테이너화
- 환경 일관성 보장 및 배포 용이성 확보
- 이식성과 재현성 극대화

#### B. FastAPI Server (Real-time)
**부팅 프로세스**:
- 컨테이너 시작 시 `.pkl` 모델 파일을 메모리에 적재
- 워밍업(Warm-up) 수행으로 첫 요청 지연시간 최소화

**API 엔드포인트**:
| 엔드포인트 | 메서드 | 설명 |
|-----------|--------|------|
| `/predict` | POST | Top-K 게임 추천 반환 (유저 ID 입력) |
| `/healthz` | GET | 서비스 가용성 모니터링 |

**응답 특징**:
- JSON 형식의 추천 결과 + 신뢰도 스코어
- ms 단위 초저지연 응답시간
- Pydantic 기반 입력 검증

#### C. MySQL Results (Pre-computed)
- Airflow에서 **미리 계산한 추천 결과 조회**
- 실시간 계산 부담 감소 → 응답 속도 대폭 향상
- 배치+실시간 하이브리드 서빙 전략

---

### 6️⃣ 웹 인터페이스 💻

#### 사용자 UI (`webapp.py`)
- 🎨 **사용자 친화적 UI**: 게임 추천 결과 시각화
- 🔗 **FastAPI 연동**: 실시간 추천 데이터 조회
- 🖼️ **게임 정보 표시**: 이미지 및 상세 정보 렌더링
- 📱 **반응형 디자인**: 다양한 기기 지원

---

## 🚨 트러블 슈팅

### 1. MLOps 환경 구축 초기 지연

#### 문제
Airflow, Docker, EC2 등 MLOps 도구에 대한 팀의 이해도 부족으로 초기 개발이 2주 이상 지연되었습니다. 특히 DAG 설계와 컨테이너 네트워킹에서 시행착오가 많았습니다.

#### 해결
- 워크플로우 문서화로 팀 이해도 향상
- 멀티 컨테이너 → 단일 컨테이너로 구조 단순화
- Discord + Notion으로 실시간 지식 공유

#### 성과
GitHub Actions → Docker Build → Airflow DAG → FastAPI 배포까지 완전 자동화 달성

---

### 2. 데이터 편향 및 평가 신뢰성 문제

#### 문제
- 무료+액션+고평점 게임에 데이터가 편중되어 추천 다양성 저하
- 실제 사용자 데이터 부재로 모델 평가 어려움

#### 해결
- `weight = rating × owned_ratio` 가중치 기반 샘플링 도입
- α-blend + noise로 100명 가상 유저, ~300개 상호작용 생성
- Precision@K, Recall@K, NDCG@K 등 다각도 평가 지표 활용

---

### 3. 실시간 서빙 지연시간 문제

#### 문제
요청마다 모델 파일 로딩으로 응답 시간 3~5초 소요

#### 해결
- 컨테이너 시작 시 모델 사전 로딩 (메모리 캐싱)
- Airflow 배치 추론 + MySQL 저장 → FastAPI는 조회만 수행
- `/healthz` 헬스체크 엔드포인트 구현

#### 성과
평균 응답 시간 **ms 단위**로 단축

<br>

## 📌 프로젝트 회고

### 🎯 최종 성과

RAWG API 기반 **Item-based Collaborative Filtering 게임 추천 시스템**과 **완전 자동화된 MLOps 파이프라인**을 구축했습니다.

| 항목 | 성과 |
|-----|------|
| 데이터셋 | 게임 40개, 가상 유저 100명, 상호작용 ~300개 |
| 모델 | ItemCF (Epoch=10), Recall 기반 최적화 |
| 자동화 | 데이터 수집 → 전처리 → 학습 → 배포 전 과정 |
| 모니터링 | WandB 실험 추적, S3 모델 버전 관리 (v1~v7) |
| CI/CD | GitHub Actions 기반 테스트/빌드/배포 자동화 |

---

### 💡 핵심 인사이트

**MLOps 철학**:
- **자동화**가 단순 모델링보다 중요 → 지속가능한 파이프라인이 핵심
- **재현성** 확보로 팀 협업 효율 극대화 (Docker + 버전 관리)
- **데이터 엔지니어링**과 모델링의 긴밀한 연결 필요성 체감

**기술 스택 통합**:
- MySQL, Airflow, AWS(EC2, S3), GitHub Actions 연동하며 각 도구의 **역할과 강점** 이해
- Airflow 워크플로우 자동화, GitHub Actions CI/CD가 **프로젝트 안정성과 생산성**의 핵심

**협업**:
- 기술 스킬만큼 **커뮤니케이션**이 중요함을 깨달음
- 문서화와 실시간 소통으로 팀 역량 격차 해소

---

### 🚀 향후 개선 방향

- [ ] CI/CD Tag 자동화 및 Airflow DAG Trigger 자동 설정
- [ ] 로그 모니터링 대시보드 구축 (Grafana + Prometheus)
- [ ] Hybrid Recommendation 적용 (콘텐츠 + 협업 필터링)
- [ ] Model Registry 도입 (MLflow/Kubeflow)
- [ ] Blue-Green/Canary 배포 전략 적용
- [ ] Kubernetes 기반 수평 확장 아키텍처
- [ ] User-CF, MF(ALS, BPR), 딥러닝 추천 모델(Two-Tower, SASRec) 도입
- [ ] A/B 테스트 프레임워크 구축

<br>


## 📰​ 참고자료
- _참고자료를 첨부해주세요_
